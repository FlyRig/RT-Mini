function CImgBuf(i,t){this.xSiz=i,this.ySiz=t,this.pixSiz=3,this.iBuf=new Uint8Array(this.xSiz*this.ySiz*this.pixSiz),this.fBuf=new Float32Array(this.xSiz*this.ySiz*this.pixSiz)}CImgBuf.prototype.setTestPattern=function(i){(i<0||4<=i)&&(i%=4);for(var t=0;t<this.ySiz;t++)for(var s=0;s<this.xSiz;s++){var h=(t*this.xSiz+s)*this.pixSiz;switch(i){case 0:s<this.xSiz/4||t<this.ySiz/4?(this.iBuf[h]=s,this.iBuf[1+h]=t):(this.iBuf[h]=0,this.iBuf[1+h]=0),this.iBuf[2+h]=255-s-t;break;case 1:this.iBuf[h]=255,this.iBuf[1+h]=128,this.iBuf[2+h]=0;break;case 2:s>5*this.xSiz/7&&t>4*this.ySiz/5?(this.iBuf[h]=200,this.iBuf[1+h]=200,this.iBuf[2+h]=200):(this.iBuf[h]=255-t,this.iBuf[1+h]=255-t,this.iBuf[2+h]=t);break;case 3:this.iBuf[h]=255-(s+t)/2,this.iBuf[1+h]=255-t,this.iBuf[2+h]=255-t;break;default:console.log("imgBuf.setTestPattern() says: WHUT!?")}}this.int2float()},CImgBuf.prototype.int2float=function(){for(var i=0;i<this.ySiz;i++)for(var t=0;t<this.xSiz;t++){var s=(i*this.xSiz+t)*this.pixSiz;this.fBuf[s]=this.iBuf[s]/255,this.fBuf[1+s]=this.iBuf[1+s]/255,this.fBuf[2+s]=this.iBuf[2+s]/255}},CImgBuf.prototype.float2int=function(){for(var i=0;i<this.ySiz;i++)for(var t=0;t<this.xSiz;t++){var s=(i*this.xSiz+t)*this.pixSiz,h=Math.min(1,Math.max(0,this.fBuf[s])),f=Math.min(1,Math.max(0,this.fBuf[1+s])),u=Math.min(1,Math.max(0,this.fBuf[2+s]));this.iBuf[s]=Math.min(255,Math.floor(256*h)),this.iBuf[1+s]=Math.min(255,Math.floor(256*f)),this.iBuf[2+s]=Math.min(255,Math.floor(256*u))}},CImgBuf.prototype.setResolution=function(i){this.xSiz=i,this.ySiz=i,this.iBuf=new Uint8Array(this.xSiz*this.ySiz*this.pixSiz),this.fBuf=new Float32Array(this.xSiz*this.ySiz*this.pixSiz)};